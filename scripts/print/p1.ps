%!PS-Adobe-2.0
%%Creator: text2ps v0.5 (cplager@uiuc.edu)
%%Pages: (atend)
%%PageOrder: Ascending
%%Orientation: Landscape
%%BoundingBox: 0 0 612 792
%%EndComments

/drawbox 
{
  0 setlinewidth
   newpath
   40  40 m 
   40 752 lineto
  572 752 lineto
  572  40 lineto
  closepath
  stroke
} def

/drawboxLand 
{
  306 396 translate
  90 rotate 
  -396 -306 translate
  0 setlinewidth
   newpath
   40  40 m 
  752  40 lineto
  752 572 lineto
   40 572 lineto
  closepath
  stroke
} def


/red {1.0 0.0 0.0 setrgbcolor} def
/blue {0.0 0.0 1.0 setrgbcolor} def
/green {0.0 1.0 0.0 setrgbcolor} def
/black {0.0 0.0 0.0 setrgbcolor} def

/cour 
{ /fontsize exch def
  /Courier findfont	   % Get the basic font
  fontsize scalefont   % Scale the font to 'fontsize' points
  setfont			   % Make it the current font
} def

/courb 
{ /fontsize exch def
  /Courier-Bold findfont
  fontsize scalefont	
  setfont			    
} def

/couri 
{ /fontsize exch def
  /Courier-Oblique findfont
  fontsize scalefont		
  setfont			
} def

/courbi 
{ /fontsize exch def
  /Courier-BoldOblique findfont	
  fontsize scalefont	
  setfont			
} def


/m { moveto } def
/s { show } def


%%Page: 1 1
gsave
drawboxLand

10 cour
18 581 m
(#!/usr/local/bin/perl -w) show
18 571 m
($version = "text2ps v0.5 \(cplager\\@uiuc.edu\)";) show
18 561 m
() show
18 551 m
($startLand = ) show
18 541 m
("\%!PS-Adobe-2.0) show
18 531 m
(\%\%Creator: $version) show
18 521 m
(\%\%Pages: \(atend\)) show
18 511 m
(\%\%PageOrder: Ascending) show
18 501 m
(\%\%Orientation: Landscape) show
18 491 m
(\%\%BoundingBox: 0 0 612 792) show
18 481 m
(\%\%EndComments\\n";) show
18 471 m
() show
18 461 m
($startPort = ) show
18 451 m
("\%!PS-Adobe-2.0) show
18 441 m
(\%\%Creator: $version) show
18 431 m
(\%\%Pages: \(atend\)) show
18 421 m
(\%\%PageOrder: Ascending) show
18 411 m
(\%\%Orientation: Landscape) show
18 401 m
(\%\%BoundingBox: 0 0 612 792) show
18 391 m
(\%\%EndComments\\n";) show
18 381 m
() show
18 371 m
($drawBoxCommands = ) show
18 361 m
("/drawbox ) show
18 351 m
({) show
18 341 m
(  0 setlinewidth) show
18 331 m
(   newpath) show
18 321 m
(   40  40 m ) show
18 311 m
(   40 752 lineto) show
18 301 m
(  572 752 lineto) show
18 291 m
(  572  40 lineto) show
18 281 m
(  closepath) show
18 271 m
(  stroke) show
18 261 m
(} def) show
18 251 m
() show
18 241 m
(/drawboxLand ) show
18 231 m
({) show
18 221 m
(  306 396 translate) show
18 211 m
(  90 rotate ) show
18 201 m
(  -396 -306 translate) show
18 191 m
(  0 setlinewidth) show
18 181 m
(   newpath) show
18 171 m
(   40  40 m ) show
18 161 m
(  752  40 lineto) show
18 151 m
(  752 572 lineto) show
18 141 m
(   40 572 lineto) show
18 131 m
(  closepath) show
18 121 m
(  stroke) show
18 111 m
(} def\\n";) show
18 101 m
() show
18 91 m
($otherCommands = ") show
18 81 m
(/m { moveto } def) show
18 71 m
(/s { show } def\\n\\n";) show
18 61 m
() show
18 51 m
($colorCommands = ") show
18 41 m
(/red {1.0 0.0 0.0 setrgbcolor} def) show
18 31 m
(/blue {0.0 0.0 1.0 setrgbcolor} def) show
18 21 m
(/green {0.0 1.0 0.0 setrgbcolor} def) show
showpage
grestore

%%Page: 2 2
gsave
drawboxLand

10 cour
18 581 m
(/black {0.0 0.0 0.0 setrgbcolor} def\\n";) show
18 571 m
() show
18 561 m
($fontCommands = "/cour ) show
18 551 m
({ /fontsize exch def) show
18 541 m
(  /Courier findfont    \% Get the basic font) show
18 531 m
(  fontsize scalefont   \% Scale the font to 'fontsize' points) show
18 521 m
(  setfont              \% Make it the current font) show
18 511 m
(} def) show
18 501 m
() show
18 491 m
(/courb ) show
18 481 m
({ /fontsize exch def) show
18 471 m
(  /Courier-Bold findfont) show
18 461 m
(  fontsize scalefont    ) show
18 451 m
(  setfont               ) show
18 441 m
(} def) show
18 431 m
() show
18 421 m
(/couri ) show
18 411 m
({ /fontsize exch def) show
18 401 m
(  /Courier-Oblique findfont) show
18 391 m
(  fontsize scalefont        ) show
18 381 m
(  setfont           ) show
18 371 m
(} def) show
18 361 m
() show
18 351 m
(/courbi ) show
18 341 m
({ /fontsize exch def) show
18 331 m
(  /Courier-BoldOblique findfont ) show
18 321 m
(  fontsize scalefont    ) show
18 311 m
(  setfont           ) show
18 301 m
(} def\\n";) show
18 291 m
() show
18 281 m
(sub startDocument {) show
18 271 m
(    if \($landscape\) {) show
18 261 m
(        print "$startLand\\n";) show
18 251 m
(    } else {) show
18 241 m
(        print "$startPort\\n";) show
18 231 m
(    }) show
18 221 m
(    print "$drawBoxCommands\\n$colorCommands\\n$fontCommands\\n$otherCommands\\n";) show
18 211 m
(}) show
18 201 m
() show
18 191 m
(sub startPage {) show
18 181 m
(    print "\%\%Page: $pageNum $pageNum\\ngsave\\n";) show
18 171 m
(    if \($landscape\) {) show
18 161 m
(        print "drawboxLand\\n\\n";) show
18 151 m
(    } else {) show
18 141 m
(        print "drawbox\\n\\n";) show
18 131 m
(    }) show
18 121 m
(    print "$fontHeight cour\\n";) show
18 111 m
(    ++$pageNum;) show
18 101 m
(    $linesPrinted = 0;) show
18 91 m
(    # do we need to figure out how many columns for numbers?) show
18 81 m
(    if \($printLineNumbers\) {) show
18 71 m
(        my $maxline = $lineNum + $numHigh + 2;) show
18 61 m
(        $numDigits = int \(log\($maxline\)/log\(10\)\) + 1;) show
18 51 m
(        if \($numDigits < 3\) {) show
18 41 m
(            $numDigits = 3;) show
18 31 m
(        }) show
18 21 m
(        $widthNumbers = \($numDigits + 0.5\) * $fontWidth;) show
showpage
grestore

%%Page: 3 3
gsave
drawboxLand

10 cour
18 581 m
(        $useWide = $numWide - $numDigits - 1;) show
18 571 m
(        $curWidth = $startWidth + \($numDigits + 1\) * $fontWidth;) show
18 561 m
(        # now draw grey box) show
18 551 m
(        $lowX = $margin;) show
18 541 m
(        $uppX = $margin + $widthNumbers;) show
18 531 m
(        $lowY = $margin;) show
18 521 m
(        $uppY = $ABSheight - $margin;) show
18 511 m
(        print "$greycolor setgray\\n";) show
18 501 m
(        print "newpath\\n$lowX $lowY m\\n$lowX $uppY lineto\\n";) show
18 491 m
(        print "$uppX $uppY lineto\\n$uppX $lowY lineto\\nclosepath\\nfill\\n";) show
18 481 m
(        print "0 setgray\\n";) show
18 471 m
(        print "newpath\\n$lowX $lowY m\\n$lowX $uppY lineto\\n";) show
18 461 m
(        print "$uppX $uppY lineto\\n$uppX $lowY lineto\\nclosepath\\nstroke\\n";) show
18 451 m
(    }) show
18 441 m
(    if \($printHeaders\) {) show
18 431 m
(        # now draw header box) show
18 421 m
(        $lowX = $margin;) show
18 411 m
(        $uppX = $ABSwidth - $margin;) show
18 401 m
(        $lowY = $ABSheight - $margin - 2 * $fontHeight;) show
18 391 m
(        $uppY = $ABSheight - $margin;) show
18 381 m
(        print "\% Start here\\n";) show
18 371 m
(        print "$greycolor setgray\\n";) show
18 361 m
(        print "newpath\\n$lowX $lowY m\\n$lowX $uppY lineto\\n";) show
18 351 m
(        print "$uppX $uppY lineto\\n$uppX $lowY lineto\\nclosepath\\nfill\\n";) show
18 341 m
(        print "0 setgray\\n";) show
18 331 m
(        print "newpath\\n$lowX $lowY m\\n$lowX $uppY lineto\\n";) show
18 321 m
(        print "$uppX $uppY lineto\\n$uppX $lowY lineto\\nclosepath\\nstroke\\n";) show
18 311 m
(        print "\% Stop here\\n";) show
18 301 m
(        $curHeight = $startHeight = ) show
18 291 m
(            $ABSheight - $heightOffset - \(2 * $fontHeight\);) show
18 281 m
(        $numHigh = int \($realHeight / $fontHeight - 1\) - 2;) show
18 271 m
(        my $startX = $ABSwidth / 2 - $fontWidth * length\($filename\);) show
18 261 m
(        my $startY = $ABSheight - $margin - $fontHeight * 1.5;) show
18 251 m
(        print \(\(2*$fontHeight\)." courb\\n$startX $startY m \($filename\) s\\n"\);) show
18 241 m
(        print "$fontHeight cour\\n";) show
18 231 m
(    }) show
18 221 m
(}) show
18 211 m
() show
18 201 m
(sub endPage {) show
18 191 m
(    print "showpage\\ngrestore\\n\\n";) show
18 181 m
(}) show
18 171 m
() show
18 161 m
(sub endDocument {) show
18 151 m
(    print "\%\%Trailer\\n\%end\\n\%\%EOF\\n\\n";) show
18 141 m
(}) show
18 131 m
() show
18 121 m
(sub removeTabs {) show
18 111 m
(    my \($string\) = @_;) show
18 101 m
(    my $retval = "";) show
18 91 m
(    my $pos = 0;) show
18 81 m
(    chomp $string;) show
18 71 m
(    my @chars = split //, $string;) show
18 61 m
(    foreach \(@chars\) {) show
18 51 m
(        if \(/\\t/\) {) show
18 41 m
(            $retval .= " " x \($tabs - \($pos \% $tabs\)\);) show
18 31 m
(            $pos += $tabs - \($pos \% $tabs\);) show
18 21 m
(            next;) show
showpage
grestore

%%Page: 4 4
gsave
drawboxLand

10 cour
18 581 m
(        }) show
18 571 m
(        ++$pos;) show
18 561 m
(        $retval .= $_;) show
18 551 m
(    }) show
18 541 m
(    return $retval;) show
18 531 m
(}) show
18 521 m
() show
18 511 m
(sub manyLines {) show
18 501 m
(    my \($line, $limit\) = @_;) show
18 491 m
(    my @retval = \(\);) show
18 481 m
(    while \(length\($line\) > $limit\) {) show
18 471 m
(        my $thisLine = substr $line, 0, $limit;) show
18 461 m
(        $line = substr $line, $limit;) show
18 451 m
(        push @retval, $thisLine;) show
18 441 m
(    }) show
18 431 m
(    push @retval, $line;) show
18 421 m
(    return @retval) show
18 411 m
(}) show
18 401 m
() show
18 391 m
(sub printLine {) show
18 381 m
(    my \($line\) = @_;) show
18 371 m
(    my @lines = manyLines \($line, $useWide\);) show
18 361 m
(    $first = "true";) show
18 351 m
(    foreach \(@lines\) {) show
18 341 m
(        if \($linesPrinted >= $numHigh\) {) show
18 331 m
(            endPage\(\);) show
18 321 m
(            startPage\(\);) show
18 311 m
(            $curHeight = $startHeight;) show
18 301 m
(        }) show
18 291 m
(        if \($first && $printLineNumbers\) {) show
18 281 m
(            my $numWidth = $startWidth - $fontWidth / 2;) show
18 271 m
(            my $digits = int \(log\($lineNum\)/log\(10\)\) + 1;) show
18 261 m
(            my $prettyNum;) show
18 251 m
(            if \($numDigits > $digits\) {) show
18 241 m
(                $prettyNum = \(" " x \($numDigits - $digits\)\).$lineNum;) show
18 231 m
(            } else {) show
18 221 m
(                $prettyNum = $lineNum;) show
18 211 m
(            }) show
18 201 m
(            print "$numWidth $curHeight m\\n\($prettyNum\) show\\n";) show
18 191 m
(        }) show
18 181 m
(        $first = "";) show
18 171 m
(        # deal with special characters) show
18 161 m
(        s|\\\\|\\\\\\\\|g; # \\ -> \\\\) show
18 151 m
(        s|\\\(|\\\\\(|g;  # \( -> \\\() show
18 141 m
(        s|\\\)|\\\\\)|g;  # \) -> \\\)) show
18 131 m
(        s|\%|\\\\\%|g;   # \% -> \\\%) show
18 121 m
(        print "$curWidth $curHeight m\\n";) show
18 111 m
(        print "\($_\) show\\n";) show
18 101 m
(        $curHeight -= $fontHeight;) show
18 91 m
(        ++$linesPrinted;) show
18 81 m
(    }) show
18 71 m
(}) show
18 61 m
() show
18 51 m
(sub initVariables{) show
18 41 m
(    $realHeight = $ABSheight - 2 * $margin;) show
18 31 m
(    $realWidth = $ABSwidth - 2 * $margin;) show
18 21 m
(    $fontWidth  = $fontHeight * 0.6;) show
showpage
grestore

%%Page: 5 5
gsave
drawboxLand

10 cour
18 581 m
(    $useWide = $numWide = int \($realWidth  / $fontWidth - 1\);) show
18 571 m
(    $numHigh = int \($realHeight / $fontHeight - 1\);) show
18 561 m
(    $pointWide = $numWide * $fontWidth;) show
18 551 m
(    $pointHigh = $numHigh * $fontHeight;) show
18 541 m
(    $heightOffset = $margin + \($realHeight - $pointHigh\) / 2 + $fontHeight;) show
18 531 m
(    $startHeight = $ABSheight - $heightOffset;) show
18 521 m
(    $startWidth  = $margin + \($realWidth - $pointWide\) / 2;) show
18 511 m
(    $curHeight = $startHeight;) show
18 501 m
(    $curWidth = $startWidth;) show
18 491 m
(}) show
18 481 m
() show
18 471 m
(##################) show
18 461 m
(## Main Program ##) show
18 451 m
(##################) show
18 441 m
() show
18 431 m
($pageNum = 1;) show
18 421 m
($tabs = 4;) show
18 411 m
($ABSheight = 792;) show
18 401 m
($ABSwidth  = 612;) show
18 391 m
($margin    = 15;) show
18 381 m
($fontHeight = 10;) show
18 371 m
($lineNum = 0;) show
18 361 m
($greycolor = 0.9;) show
18 351 m
() show
18 341 m
(# get arguments) show
18 331 m
(while \($ARGV[0] =~ /^-/\) {) show
18 321 m
(    $_ = $';) show
18 311 m
(    shift @ARGV;) show
18 301 m
(    # landscape) show
18 291 m
(    if \(/^l/i\) {) show
18 281 m
(        #landscape mode) show
18 271 m
(        $landscape = "true";) show
18 261 m
(        next;) show
18 251 m
(    }) show
18 241 m
(    # portrait) show
18 231 m
(    if \(/^p/i\) {) show
18 221 m
(        #portrait mode) show
18 211 m
(        $landscape = "";) show
18 201 m
(        next;) show
18 191 m
(    }) show
18 181 m
(    # font size) show
18 171 m
(    if \(/^f/i\) {) show
18 161 m
(        if \($' =~ /\(\\d+\)/\) {) show
18 151 m
(            $fontHeight = $1;) show
18 141 m
(        } elsif \($ARGV[0] =~ /^\\d+$/\) {) show
18 131 m
(            $fontHeight = shift @ARGV;) show
18 121 m
(        }) show
18 111 m
(        next;) show
18 101 m
(    }) show
18 91 m
(    if \(/^h/i\) {) show
18 81 m
(        $printHeaders = "true";) show
18 71 m
(        next;) show
18 61 m
(    }) show
18 51 m
(    # don't print line numbers) show
18 41 m
(    if \(\(/^nn/i\) || \(/^n0/i\)\) {) show
18 31 m
(        $printLineNumbers = "";) show
18 21 m
(        next;) show
showpage
grestore

%%Page: 6 6
gsave
drawboxLand

10 cour
18 581 m
(    }) show
18 571 m
(    # print line numbers) show
18 561 m
(    if \(/^n/i\) {) show
18 551 m
(        $printLineNumbers = "true";) show
18 541 m
(        next;) show
18 531 m
(    }) show
18 521 m
(    print STDERR "Unknown option $_\\n";) show
18 511 m
(}) show
18 501 m
() show
18 491 m
(if \($landscape\) {) show
18 481 m
(    \($ABSheight, $ABSwidth\) = \($ABSwidth, $ABSheight\) ) show
18 471 m
(}) show
18 461 m
() show
18 451 m
(initVariables\(\);) show
18 441 m
(startDocument\(\);) show
18 431 m
(foreach $filename \(@ARGV\) {) show
18 421 m
(    $start = $stop = 0;) show
18 411 m
(    if \($filename =~ /:\(\\d+\),?\(\\d*\)$/\) {) show
18 401 m
(        $filename = $`;) show
18 391 m
(        $start = $1;) show
18 381 m
(        $stop = $2;) show
18 371 m
(    }) show
18 361 m
(    if \(! -e $filename\) {) show
18 351 m
(        warn "Can't find $filename.  Sorry\\n";) show
18 341 m
(        next;) show
18 331 m
(    }) show
18 321 m
(    open \(SOURCE, $filename\) or warn "Couldn't open $filename\\n", next;) show
18 311 m
(    $filename =~ s|.*/||g;) show
18 301 m
(    if \($start\) {) show
18 291 m
(        $filename .= ":$start..";) show
18 281 m
(        if \($stop\) {) show
18 271 m
(            $filename .= $stop;) show
18 261 m
(        }) show
18 251 m
(    }) show
18 241 m
(    $lineNum = 0;) show
18 231 m
(    startPage\(\);) show
18 221 m
(    while \(<SOURCE>\) {) show
18 211 m
(        ++$lineNum;) show
18 201 m
(        if \(\($start && \(\($lineNum < $start\)\)\) ||) show
18 191 m
(            \($stop &&  \(\($lineNum > $stop\)\)\)\) {) show
18 181 m
(            next;) show
18 171 m
(        }) show
18 161 m
(        chomp;) show
18 151 m
(        printLine \( removeTabs\($_\) \);) show
18 141 m
(    }) show
18 131 m
(    endPage\(\);) show
18 121 m
(}) show
18 111 m
() show
18 101 m
(endDocument\(\);) show
showpage
grestore

%%Trailer
%end
%%EOF

